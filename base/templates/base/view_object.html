{% extends 'base/base.html' %}

{% block content %}
    <ol class="breadcrumb">
        <li><a href="{% url 'index' %}">На головну</a></li>
        <li>{{ obj.name }}</li>
    </ol>
    <div class="row">
    {% if type == '1' %}
        <div class="col-md-10">
            <ul class="list-group">
                <li class="list-group-item list-group-item-success"><span
                            class="glyphicon glyphicon-briefcase" aria-hidden="true"></span>{{ obj.name }}</li>
                {% for build in builds %}
                    {% if obj.id == build.institution.id %}
                        <li class="list-group-item"><a href="{% url 'view_object' build.id 2 %}"><span
                        class="glyphicon glyphicon-home" aria-hidden="true"></span>{{ build.name }}</a></li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
        <div class="col-md-2">
            <div class="btn-group-vertical" role="group">
                {% if lead_perm %}
                    <a href="{% url 'edit_object' obj.id obj.id type %}" class="btn btn-default">Редагувати об'єкт</a>
                {% endif %}
                {% if delegate_perm %}
                    <a href="{% url 'delegate_perms' obj.id type %}" class="btn btn-default">Редагувати права</a>
                {% endif %}
            </div>
        </div>
    {% elif type == '2' %}
        <div class="col-md-9">
            <ul class="list-group">
                <li class="list-group-item list-group-item-success"><b>Заклад: </b>{{ obj.name }}</li>
                <li class="list-group-item"><b>Заклад: </b>{{ obj.institution }}</li>
                <li class="list-group-item"><b>Площа: </b>{{ obj.square }}</li>
                <li class="list-group-item"><b>Категорія: </b>{{ obj.category }}</li>
                <li class="list-group-item"><b>Призначення: </b>{% if obj.purpose.name == base.ObjectPurpose.None %}
                    {{ obj.purpose.name }} {% else %} - {% endif %}</li>
                </li>
                <li class="list-group-item"><b>Дата здачі в експлуатацію: </b>{{ obj.date_from }}</li>
                <li class="list-group-item"><b>Орендодавець: </b>{% if obj.parent %}{{ obj.parent }} {% else %}
                    - {% endif %}</li>
            </ul>
        </div>
        <div class="col-md-3">
            <div class="btn-group-vertical" role="group">
                {% if lead_perm %}
                    <a href="{% url 'create_item_for_object' 1 obj.id %}" class="btn btn-default">Додати показник
                        лічильника</a>
                    <a href="{% url 'create_item_for_object' 2 obj.id %}" class="btn btn-default">Додати рахунок</a>
                    <a href="{% url 'edit_object' obj.id obj.id 2 %}" class="btn btn-default">Редагувати об'єкт</a>
                {% endif %}
                {% if delegate_perm %}
                    <a href="{% url 'delegate_perms' obj.id 2 %}" class="btn btn-default">Редагувати права</a>
                {% endif %}
            </div>
        </div>
    {% endif %}
    </div>
    {% if type == '2' %}
    <div class="row">
        <div class="col-md-4">
            {% if comps %}
                <ul class="list-group">
                    <li class="list-group-item list-group-item-success"><b>Компоненти</b></li>
                </ul>
                {% for comp in comps %}
                    <ul class="list-group">
                        <li class="list-group-item"><b>Тип: </b>{{ comp.type }} <a
                                href="{% url 'edit_object' obj.id comp.id 5 %}" class="pull-right edit-item"><span
                                class="glyphicon glyphicon-edit" aria-hidden="true"></span></a></li>
                        <li class="list-group-item"><b>Кількість: </b>{{ comp.quantity }}</li>
                    </ul>
                {% endfor %}
            {% else %}
                <div class="panel panel-default">
                    <div class="panel-body">
                        Компоненти відсутні
                    </div>
                </div>
            {% endif %}
        </div>
        <div class="col-md-4">
            {% if features %}
                <ul class="list-group">
                    <li class="list-group-item list-group-item-success"><b>Характеристики</b></li>
                </ul>
                {% for feature in features %}
                    <ul class="list-group">
                        <li class="list-group-item"><b>Компонент: </b>{{ feature.component }} <a
                                href="{% url 'edit_object' obj.id feature.id 3 %}" class="pull-right edit-item"><span
                                class="glyphicon glyphicon-edit" aria-hidden="true"></span></a></li>
                        <li class="list-group-item"><b>Тип характеристики: </b>{{ feature.feature_type }}</li>
                        <li class="list-group-item"><b>Відсоток від загальної кількості: </b>{{ feature.percentage }}
                        </li>
                        <li class="list-group-item"><b>Від: </b>{{ feature.date_from }}</li>
                        <li class="list-group-item"><b>До: </b>{{ feature.date_until }}</li>
                    </ul>
                {% endfor %}
            {% else %}
                <div class="panel panel-default">
                    <div class="panel-body">
                        Характеристики відсутні
                    </div>
                </div>
            {% endif %}
        </div>
        <div class="col-md-4">
            {% if meters %}
                <ul class="list-group">
                    <li class="list-group-item list-group-item-success"><b>Лічильники</b></li>
                </ul>
                {% for meter in meters %}
                    <ul class="list-group">
                        <li class="list-group-item"><b>Ідентифікатор лічильника: </b>{{ meter.name }}<a
                                href="{% url 'edit_object' obj.id meter.id 4 %}" class="pull-right edit-item"><span
                                class="glyphicon glyphicon-edit" aria-hidden="true"></span></a></li>
                        <li class="list-group-item"><b>Заклад: </b>{{ meter.institution }}</li>
                        <li class="list-group-item"><b>Будівля: </b>{{ meter.building }}</li>
                        <li class="list-group-item"><b>Тип лічильника: </b>{{ meter.meter_type }}</li>
                        <li class="list-group-item"><b>Орендодавець: </b>{{ meter.parent }}</li>
                    </ul>
                {% endfor %}
            {% else %}
                <div class="panel panel-default">
                    <div class="panel-body">
                        Лічильники відсутні
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

{% endblock %}